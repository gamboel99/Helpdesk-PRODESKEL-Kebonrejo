<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Form Prodeskel - Desa Kebonrejo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Leaflet Map -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <style>
    /* Reset */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f6f9;
      color: #333;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Navbar */
    header {
      background: #0d6efd;
      color: white;
      padding: 15px 20px;
      text-align: center;
      font-size: 1.2rem;
      font-weight: bold;
    }

    /* Container */
    .container {
      flex: 1;
      padding: 20px;
      max-width: 900px;
      margin: 20px auto;
    }

    /* Card */
    .card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    /* Tabs */
    .tabs {
      display: flex;
      border-bottom: 2px solid #ddd;
      margin-bottom: 15px;
    }
    .tabs button {
      flex: 1;
      padding: 10px;
      border: none;
      background: #f1f1f1;
      cursor: pointer;
      font-weight: bold;
    }
    .tabs button.active {
      background: #0d6efd;
      color: white;
    }

    /* Form section */
    .tab-content { display: none; }
    .tab-content.active { display: block; }

    .form-group {
      margin-bottom: 15px;
    }
    label { font-weight: bold; display: block; margin-bottom: 5px; }
    input, select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }

    /* Navigation buttons */
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    .btn {
      background: #0d6efd;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
    }
    .btn:disabled { background: #999; cursor: not-allowed; }

    /* Map */
    #map { height: 250px; margin-top: 15px; border-radius: 10px; }

    /* Footer */
    footer {
      background: #0d6efd;
      color: white;
      text-align: center;
      padding: 10px;
      font-size: 0.9rem;
    }

    /* Dark mode */
    body.dark {
      background: #181a1b;
      color: #eee;
    }
    body.dark .card { background: #242526; color: #eee; }
    body.dark header, body.dark footer { background: #111; }
  </style>
</head>
<body>
  <header>üìä Form Prodeskel - Desa Kebonrejo</header>

  <div class="container">
    <div class="card">
      <!-- Tabs -->
      <div class="tabs">
        <button class="tab-btn active" onclick="showTab(0)">Identitas</button>
        <button class="tab-btn" onclick="showTab(1)">Sosial</button>
        <button class="tab-btn" onclick="showTab(2)">Ekonomi</button>
      </div>

      <!-- Tab 1 -->
      <div class="tab-content active">
        <div class="form-group">
          <label>Nama Kepala Keluarga</label>
          <input type="text" id="nama" required>
        </div>
        <div class="form-group">
          <label>No KK</label>
          <input type="text" id="kk" required>
        </div>
        <div class="form-group">
          <label>Dusun</label>
          <input type="text" id="dusun">
        </div>
        <div class="form-group">
          <label>RW</label>
          <input type="text" id="rw">
        </div>
        <div class="form-group">
          <label>RT</label>
          <input type="text" id="rt">
        </div>
        <div class="form-group">
          <button class="btn" onclick="getLocation()">üìç Ambil Lokasi</button>
          <div id="map"></div>
        </div>
      </div>

      <!-- Tab 2 -->
      <div class="tab-content">
        <div class="form-group">
          <label>Akses Air Bersih</label>
          <select id="air">
            <option value="5">Layak (5)</option>
            <option value="3">Tidak Layak (3)</option>
            <option value="1">Tidak Ada (1)</option>
          </select>
        </div>
        <div class="form-group">
          <label>Sarana Kesehatan</label>
          <select id="kesehatan">
            <option value="5">Lengkap (5)</option>
            <option value="3">Cukup (3)</option>
            <option value="1">Tidak Ada (1)</option>
          </select>
        </div>
      </div>

      <!-- Tab 3 -->
      <div class="tab-content">
        <div class="form-group">
          <label>Mata Pencaharian Utama</label>
          <select id="pekerjaan">
            <option value="5">Tetap (5)</option>
            <option value="3">Tidak Tetap (3)</option>
            <option value="1">Tidak Ada (1)</option>
          </select>
        </div>
        <div class="form-group">
          <label>Pendapatan Bulanan</label>
          <select id="pendapatan">
            <option value="5">> Rp 5 jt</option>
            <option value="3">Rp 1‚Äì5 jt</option>
            <option value="1">< Rp 1 jt</option>
          </select>
        </div>
      </div>

      <!-- Navigation -->
      <div class="nav-buttons">
        <button class="btn" id="prevBtn" onclick="nextPrev(-1)" disabled>Sebelumnya</button>
        <button class="btn" id="nextBtn" onclick="nextPrev(1)">Selanjutnya</button>
      </div>
    </div>
  </div>

  <footer>¬© 2025 Desa Kebonrejo, Kec. Kepung, Kab. Kediri</footer>

  <script>
    let currentTab = 0;
    function showTab(n) {
      document.querySelectorAll(".tab-btn").forEach((btn,i)=>{
        btn.classList.toggle("active", i===n);
      });
      document.querySelectorAll(".tab-content").forEach((tab,i)=>{
        tab.classList.toggle("active", i===n);
      });
      currentTab = n;
      document.getElementById("prevBtn").disabled = n===0;
      document.getElementById("nextBtn").innerText = n===2 ? "Simpan" : "Selanjutnya";
    }
    function nextPrev(n) {
      let newTab = currentTab + n;
      if(newTab < 0 || newTab > 2) return;
      if(newTab===3){ alert("Data tersimpan!"); return; }
      showTab(newTab);
    }

    // Leaflet map
    let map, marker;
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(pos => {
          let lat = pos.coords.latitude;
          let lng = pos.coords.longitude;
          if(!map){
            map = L.map('map').setView([lat, lng], 15);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
              attribution: '¬© OpenStreetMap'
            }).addTo(map);
          }
          if(marker) map.removeLayer(marker);
          marker = L.marker([lat,lng]).addTo(map).bindPopup("Lokasi Anda").openPopup();
        });
      } else {
        alert("Browser tidak mendukung GPS");
      }
    }
  </script>
</body>
</html>
